# Migration `20210203070911-create-comments`

This migration has been generated by oliver fu at 2/2/2021, 11:09:11 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "Comment" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "body" TEXT NOT NULL,
    "imageId" INTEGER NOT NULL,

    FOREIGN KEY ("imageId") REFERENCES "Image"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

PRAGMA foreign_keys=OFF;
CREATE TABLE "new_Image" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "title" TEXT NOT NULL,
    "url" TEXT NOT NULL,
    "likes" INTEGER DEFAULT 0
);
INSERT INTO "new_Image" ("id", "title", "url", "likes") SELECT "id", "title", "url", "likes" FROM "Image";
DROP TABLE "Image";
ALTER TABLE "new_Image" RENAME TO "Image";
PRAGMA foreign_key_check;
PRAGMA foreign_keys=ON
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20210114024801-migration..20210203070911-create-comments
--- datamodel.dml
+++ datamodel.dml
@@ -1,9 +1,9 @@
 datasource DS {
   // optionally set multiple providers
   // example: provider = ["sqlite", "postgresql"]
   provider = "sqlite"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider      = "prisma-client-js"
@@ -16,6 +16,14 @@
 model Image {
   id    Int    @default(autoincrement()) @id
   title String
   url   String
-  likes Int @default(0)
+  likes Int? @default(0)
+  comments Comment[]
+}
+
+model Comment {
+  id Int @id @default(autoincrement())
+  body String
+  image Image @relation(fields: [imageId], references: [id])
+  imageId Int
 }
```


